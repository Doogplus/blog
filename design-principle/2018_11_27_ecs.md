# [SAP01] Entity-Component System

ECS（Entity-Component System）的概念，随着 Unity3d 在游戏圈里，变得很流行。其实这个模式，早就被用于各大系统的设计。

## Unity3d 中的 ECS（Entity-Component System）

上面更多的在谈到 entity，以及 entity 之间互相发消息。

如果一个 entity 本身就很复杂，可以将其每个子模块，独立为一个 component，代码逻辑分开。Unity3d 中的每一个 entity 就是如此。

```C
class MoveComponent;
class RenderComponent;
class PhysicsComponent;
...

class Player {
    MoveComponent;
	RenderComponent;
	...
};

class PhysicsMonster {
	MoveComponent;
	RenderComponent;
    PhysicsComponent;
	...
};
```

我们项目中的代码也一样，对于 Player 的所有功能模块，都才分到不同的 component 中，划分在不同的代码文件上。

![](2018_11_27_ecs_image_03.png)

抽象了看，ECS，不过是两层的 Actor Model：

 * entity 之间是一层
 * entity 内部的 component 之间是一层

https://www.gamasutra.com/blogs/TobiasStein/20171122/310172/The_EntityComponentSystem__An_awesome_gamedesign_pattern_in_C_Part_1.php

https://www.gamedev.net/articles/programming/general-and-gameplay-programming/understanding-component-entity-systems-r3013
